{"title":"Data Sets","markdown":{"yaml":{"title":"Data Sets","author":"Luis Sarmiento, Thomas Longden, Soheil Shayegh, and Shouro Dasgupta","format":{"html":{"toc":true,"warning":false,"code-fold":true,"code-summary":"Show the Code","fontsize":"15px"}}},"headingText":"Mortality","containsRefs":false,"markdown":"\n\n\n```{r}\n#| echo: false\n# Set the file path\nfile = gsub(\"/web-page\",\"\", getwd())\n# Load the data set \ndata = read_rds(paste0(file, \"/02_GenData/01_mortality/CodedMortSample.rds\")) |> ungroup()\n```\n\nWe obtain mortality data from the Mexican National Institute of Geography and Statistics (INEGI). The data contains the state, county, date, and time of the event, as well as additional variables like gender, age, employment status, occupation, education, nationality, marital status, cause of death (i.e. ICD code), type of medical assistance, place of death, who certified the death, if the person died during working hours, and whether the event was pregnancy related. The data set contains more than ten million observations across `r comma(ncol(data))` variables and comes from the administrative records of 2,400 municipalities covering the period between January 1998 and December 2017. @tbl-MortID contains a series of identifiers concerning the life event. It includes the date and hour of death, the municipality id (agem), and the ICD10 written by the person who certified the life event.\n\n```{r}\n#| label: tbl-MortID\n#| tbl-cap: Identifiers of the life event\n#| tbl-cap-location: top\n#| echo: false\n# Create the plot\nkbl(select(data, date, hour, agem, StateName, CountyName, icd), booktabs = T) %>% \n  kable_classic_2(full_width = F, html_font = \"Cambria\", bootstrap_option = c(\"hover\")) %>% \n  column_spec(c(1), italic = T, color = \"DarkBlue\")\n\n```\n\n@tbl-MortSocial presents the set of socio-demographic characteristics included in the main file. *unemployment* is a categorical variable equal to employed, unemployed, unknown, or kids. INEGI required administrative units to record the employment status at the time of death from 2012. The *unknown* option occurs when the administrative unit ignores the employment status of the person and the *kids* option applies to children younger than five. *age* refers to the age in years of the diseased. We round the age to zero for kids under one. *married* can take four values; single, NotSingle, unknown, and kids. In this context, *kids* are persons younger than twelve. *educ* is the education level of the deseased Note that the classification of educational attainment differs from the period between 1998-2012 and 2013-2017 (see @tbl-EducCodes). *job* refers to the occupation of the person at the time of the life-event. As with *educ*, the occupation categories differ for all years before and after 2012 (see @tbl-JobCodes).\n\n\n```{r}\n#| label: tbl-MortSocial\n#| tbl-cap: Socio-demographic characteristics of the deseased\n#| tbl-cap-location: top\n#| echo: false\n\n# Create the plot\nkbl(select(data, date, hour, unemployment, age, married, EducEnglish, JobEnglish) |> \n      mutate_at(vars(EducEnglish, JobEnglish), str_wrap, 15), booktabs = T) %>% \n  kable_classic_2(full_width = F, html_font = \"Cambria\", bootstrap_option = c(\"hover\")) %>% \n  column_spec(c(1), italic = T, color = \"DarkBlue\") \n\n```\n\n@tbl-MortEvent presents characteristics of the life-event. **WorkDeath** is an indicator variable equal to *WorkDeath* if the person died because of work-related activities, *NoWorkDeath* if the person died at work from natural causes, *NaturalDeath* when the person died from natural causes outside work, and *Unknown* **AccidentPlaceEnglish** and **DeathPlaceEnglish** indicate the place of death in case of accidents and natural deaths. As with the education and occupation identifiers, the place identifiers also differ after 2012.\n\n\n```{r}\n#| label: tbl-MortEvent\n#| tbl-cap: Characteristics of the life event\n#| tbl-cap-location: top\n#| echo: false\n# Set the file path\nfile = gsub(\"/web-page\",\"\", getwd())\n# Create the plot\nkbl(select(data, date, hour,WorkDeath, AccidentPlaceEnglish, DeathPlaceEnglish)) %>% \n   kable_classic_2(full_width = F, html_font = \"Cambria\", bootstrap_option = c(\"hover\")) %>% \n  column_spec(c(1), italic = T, color = \"DarkBlue\")\n\n```\n\n\n# Weather\n```{r}\n#| echo: false\n# Set the file path\nfile = gsub(\"/web-page\",\"\", getwd())\n# Load the data set \nweather = read_rds(paste0(file, \"/02_GenData/02_weather/RawWeatherSample.rds\")) |> ungroup()\nidw = read_rds(paste0(file, \"/02_GenData/02_weather/WeatherSampleIDW.rds\")) |> ungroup()\n```\n\nTemperature data comes from 1,994 automated weather stations administered by the National Water Commission (CONAGUA). Each station has daily measures of precipitation, evaporation, as well as the maximum and minimum temperature for each day between January 1990 and December 2017. @tbl-WeatherRaw shows a sample of the raw station data. It contains the station id, its geographical location (lon and lat), the date of observation, precipitation, evaporation, and the maximum and minimum temperature recorded in that day.\n\n\n```{r}\n#| label: tbl-WeatherRaw\n#| tbl-cap: Raw weather data\n#| tbl-cap-location: top\n#| echo: false\n# Create the plot\nkbl(weather, booktabs = T) %>% \n  kable_classic_2(full_width = F, html_font = \"Cambria\", bootstrap_option = c(\"hover\")) %>% \n  column_spec(c(1), italic = T, color = \"DarkBlue\")\n\n```\n\n\n# Appendix\n::: panel-tabset\n\n#### Education Code Groups\n```{r}\n#| echo: false\n#| label: tbl-EducCodes\n#| tbl-cap: Education catgories across time\nread_excel(paste0(file, \"/01_RawData/05_other/CodeBook.xlsx\"), sheet = \"Education\") |> \n  select(EnglishName, from, to) %>% kbl(.) %>% \n  kable_classic_2(full_width = F, html_font = \"Cambria\", bootstrap_option = c(\"hover\")) %>% \n  column_spec(c(1), italic = T, color = \"DarkBlue\") %>% scroll_box(height = \"300px\")\n```\n\n#### Occupation Code Groups\n```{r}\n#| echo: false\n#| label: tbl-JobCodes\n#| tbl-cap: Occupation catgories across time\nread_excel(paste0(file, \"/01_RawData/05_other/CodeBook.xlsx\"), sheet = \"Occupation\") |> \n  select(EnglishName, from, to) %>% kbl(.) %>% \n  kable_classic_2(full_width = F, html_font = \"Cambria\", bootstrap_option = c(\"hover\")) %>% \n  column_spec(c(1), italic = T, color = \"DarkBlue\") %>% scroll_box(height = \"300px\")\n```\n\n#### Accident Place Code Groups\n```{r}\n#| echo: false\n#| label: tbl-AccidentCodes\n#| tbl-cap: Occupation catgories across time\nread_excel(paste0(file, \"/01_RawData/05_other/CodeBook.xlsx\"), sheet = \"AccidentPlace\") |> \n  select(EnglishName, from, to) %>% kbl(.) %>% \n  kable_classic_2(full_width = F, html_font = \"Cambria\", bootstrap_option = c(\"hover\")) %>% \n  column_spec(c(1), italic = T, color = \"DarkBlue\") %>% scroll_box(height = \"300px\")\n```\n\n#### Death Place Code Groups\n```{r}\n#| echo: false\n#| label: tbl-DeathCodes\n#| tbl-cap: Occupation catgories across time\nread_excel(paste0(file, \"/01_RawData/05_other/CodeBook.xlsx\"), sheet = \"DeathPlace\") |> \n  select(EnglishName, from, to) %>% kbl(.) %>% \n  kable_classic_2(full_width = F, html_font = \"Cambria\", bootstrap_option = c(\"hover\")) %>% \n  column_spec(c(1), italic = T, color = \"DarkBlue\") %>% scroll_box(height = \"300px\")\n```\n:::\n"},"formats":{"html":{"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":false,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":true,"code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["styles.css"],"toc":true,"output-file":"02_data.html"},"language":{"code-summary":"Show the Code"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.2.242","theme":"journal","title":"Data Sets","author":"Luis Sarmiento, Thomas Longden, Soheil Shayegh, and Shouro Dasgupta","fontsize":"15px"},"extensions":{"book":{"multiFile":true}}}}}